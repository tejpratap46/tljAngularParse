(function(n){n(["jquery"],function(n){function ft(n){t.modal(g).find(".modal-content").append(n)}function it(t){var e,o,s,i,f,r;if(t===!1)return u;if(e=n(h).addClass("modal-footer").prop("id",ut),t)for(o=0,s=t.length;o<s;o++){i=t[o];f=n("<button>").addClass("btn btn-"+(i.style||"primary"));for(r in i)if(i.hasOwnProperty(r))switch(r){case"close":i[r]&&f.attr("data-dismiss","modal").addClass("x");break;case w:f.click(i.click);break;case"text":f.html(i[r]);break;default:f.attr(r,i[r])}e.append(f)}else e.append('<button class="x btn btn-primary" data-dismiss=modal type=button>Close<\/button>');return e}function et(t){var i,u=t.loading?r.loadingHtml:t.message||t;return u.on||u.onclick?(i=t.clone===!0?n(u).clone():n(u),i.addClass(t.useBin&&!t.loading?p:tt)):i=n(h).addClass(y).html(u),t.css&&t.css!==i.css&&i.css(t.css),i}function ot(){function r(){return n('<div class="modal fade" tabindex="-1"><style>.modal-xl{width:96%;}<\/style><div class=modal-dialog><div class=modal-content> <div class=modal-header><button type=button class="x close" data-dismiss=modal><span aria-hidden=true>&times;<\/span><span class=sr-only>Close<\/span><\/button><h4 class=modal-title><\/h4><\/div><\/div><\/div><\/div>').on("hidden.bs.modal",rt).on(w,"button.x",function(i){var r=n(i.currentTarget);if(r.prop("type")!==l)return t.modal(a);try{if(r.closest("form")[0].checkValidity())return o()}catch(u){return o()}return t})}t||(document.getElementById(s)||n("body").append(n(h).prop("id",s).hide()),t=r(),i.element=t);return t.on(c,function(){n(this).find(b).first().focus()})}function rt(){if(t){var n=t.find("."+p).removeClass(p).appendTo("#"+s);t.off(v).off(c).find(".modal-content > div:not(:first-child)").remove();(!r.allowContentRecycle||d.clone)&&n.remove()}}function st(f,e){if(i=n.Deferred(),i.catch=i.fail,i.element=t,!f)throw new Error("Invalid parameters!");rt();d=f;var o=ot();o.find(".modal-dialog").removeClass("modal-sm modal-lg modal-xl").addClass(f.size?"modal-"+f.size:r.size);o.find(".modal-title").html((f.title||e||r.title)+" ").append(n("<small>").html(f.subtitle||u));o.on(v,f.onHide)}function ht(u,f){function s(n,r){var u=r==="error",f;t.on(c,u?i.reject:i.resolve);u&&(f='<div class="alert alert-danger"><strong>XHR Fail: <\/strong>URL [ '+o.url+"] load fail.<\/div>",t.find("."+y).html(f))}var o={async:!0,loading:!0,title:u.title||f||r.title,url:u.url||u};return u.url&&n.extend(o,u),e(o,f).element.find("."+y).load(o.url,s),i}function e(r,u){st(r,u);var f=n(h).append(et(r),it(r.buttons));if(ft(f),!r.async)t.on(c,i.resolve);return i}function ct(t,u){function s(t){o();var r=n(t.currentTarget).html();return f[r]?i.resolve():i.reject()}return e({async:!0,buttons:[{close:!0,click:s,text:f[t.label]?f[t.label]:f[r.confirmLabel],style:k},{close:!0,click:s,text:f[t.label]?t.label:r.confirmLabel}],message:t.message||t,onHide:s,size:t.size,title:t.title||u})}function lt(t,u){function s(){return n(this).parent().find("div."+tt).fadeOut(function(){n(this).remove()}),i.resolve()}var f='<div class=modal-body style="position: absolute;width: 100%;background-color: rgba(255,255,255,0.8);height: 100%;">%1%<\/div><iframe class="embed-responsive-item" frameborder=0 src="%0%" style="width:100%;height:75vh;display:block;"/>'.replace("%0%",t.message||t.url||t).replace("%1%",r.loadingHtml),o=n(f).load(s);return e({async:!0,buttons:t.buttons||!1,message:o,size:t.size||nt.xl,title:t.title||u})}function at(){return n("#"+s+" > *").remove()}function vt(s,h){function w(n){var r=t.find(b).val();return o(),n.type!==l?i.reject(r):i.resolve(r),!1}var c={},a,v,y,p;if(typeof s=="object"?n.extend(c,s):(c.message=s,c.title=h),c.async=!0,c.buttons)for(v=0,y=c.buttons.length;v<y;v++)a=c.buttons[v],a.style=(a.style||"default")+" pull-left",a.type=a.type||"button";return p=it([{close:!0,type:"reset",text:f.OK,style:k},{close:!1,type:l,text:r.confirmLabel}].concat(c.buttons||[])),c.buttons=!1,c.onHide=w,c.message=n('<form role=form style="margin-bottom:0;"><div class=modal-body><label for=prompt-input class=control-label>'+(c.message||u)+'<\/label><input type=text class=form-control required autocomplete="on" value="'+(c.value||u)+(c.pattern?'" pattern="'+c.pattern:u)+'"><\/div><\/form>').append(p).on(l,w),e(c)}function yt(t){return n.extend(r,t)}function pt(i){return t&&t.remove(),n.extend(g,i)}function o(){return t&&t.off(v).modal(a),t}var t,s="recycle-bin",h='<div style="position:relative;word-wrap:break-word;">',u="",w="click",a="hide",c="shown.bs.modal",l="submit",ut="eFooter",v=a+".bs.modal",b="input",k="danger",f={OK:"Cancel",True:"False",Yes:"No"},d={},y="modal-body",g={},p="modal-rec",nt={sm:"sm",lg:"lg",xl:"xl"},tt="modal-tmp",r={allowContentRecycle:!0,confirmLabel:"OK",size:u,loadingHtml:'<h5>Loading...<\/h5><div class=progress><div class="progress-bar progress-bar-striped active" style="width: 100%"><\/div><\/div>',title:"Attention"},i=null;return{ajax:ht,alert:e,close:o,confirm:ct,emptyBin:at,iframe:lt,prompt:vt,setEModalOptions:yt,setModalOptions:pt,size:nt,version:"1.2.03"}})})(typeof define=="function"&&define.amd?define:function(n,t){typeof module!="undefined"&&window.module.exports?window.module.exports=t(window.require(n[0])):window.eModal=t(window.$)});